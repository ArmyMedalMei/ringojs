<% extends 'base.html' %>

<% subskin 'content' -------------------------------------------------------------------- %>
<% render <% page %> %>

<% subskin 'welcome' | markdown %>

  This is a little game to show off continuations support in Helma NG.
  All you'll have to do is answer a few easy questions.</p>

  [Click here to start](/continuation/run)

  What's special about this demo is that all pages are generated by
  [one single JavaScript function][1] providing multiple action callbacks. 
  Local variables are stored in the HTTP user session, so no extra effort is required to
  manage state between pages.</p>

  [1]: http://dev.helma.org/trac/helma/browser/helma-ng/trunk/apps/demo/actions.js#L51

<% subskin 'ask_name' | markdown %>

  What is your name?
  <form method="post" action="<% session.forward %>">
  <input name="name" value="<% session.data.name %>">
  <input type="submit">
  </form>

  [forward](<% session.forward %>)

  <% render 'list' %>

<% subskin 'ask_food' | markdown %>

  What is your favorite food?
  <form method="post" action="<% session.forward %>">
  <input name="food" value="<% session.data.food %>">
  <input type="submit">
  </form>

  [back](<% session.back %>) [forward](<% session.forward %>)

  <% render 'list' %>

<% subskin 'ask_animal' | markdown %>

  What is your favorite animal?
  <form method="post" action="<% session.forward %>">
  <input name="animal" value="<% session.data.animal %>">
  <input type="submit">
  </form>

  [back](<% session.back %>) [forward](<% session.forward %>)

  <% render 'list' %>

<% subskin 'result' | markdown %>

  Thanks for your collaboration. Your name is <b><% session.data.name %></b>,
  you love to eat <b><% session.data.food %></b> and your favorite animal
  is <b><% session.data.animal %></b>.

  [back](<% session.back %>)

  <% render 'list' %>

<% subskin 'list'%>

  <% for value in <% session.data %> render 'item'
        | wrap "<div style='color: gray;'>" "</div>"
  %>

<% subskin 'item' %>
   <div><% index %>: <% value %></div>
